(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{490:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("blockquote",[t("p",[s._v("大家好~我是"),t("code",[s._v("米洛")]),s._v("！"),t("br"),s._v("\n我正在从0到1打造一个开源的接口测试平台, 也在编写一套与之对应的"),t("code",[s._v("教程")]),s._v("，希望大家多多支持。"),t("br"),s._v("\n欢迎关注我的公众号"),t("code",[s._v("米洛的测开日记")]),s._v("，一起交流学习!")])]),s._v(" "),t("h3",{attrs:{id:"回顾"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#回顾"}},[s._v("#")]),s._v(" 回顾")]),s._v(" "),t("p",[s._v("上一节我们在"),t("code",[s._v("测试报告")]),s._v("页面增加了重试功能，使得用例调试变得更为方便。")]),s._v(" "),t("p",[s._v("最近因为自己闲的蛋疼在看一些性能测试平台，也感受到了一些不同，虽然人家只是压测工具，但对于接口测试中的一些参数处理，做的还是挺出色的，所以我打算小小地"),t("code",[s._v('"借鉴"')]),s._v("一下。")]),s._v(" "),t("p",[s._v("(由于整体设计不太一致，所以暂时只剥离他用到的那块内容。)")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://files.mdnice.com/user/11504/5482bbe7-e882-4dac-b3e0-7dcb764c2b1d.png",alt:""}})]),s._v(" "),t("p",[s._v("上图就是重点部分啦，图中这个系统（pts即阿里云的性能测试工具）相比较pity而言，他对于"),t("code",[s._v("上一接口的返回值")]),s._v("有着很明确的规划。")]),s._v(" "),t("p",[s._v("它并不提供完整的数据（pity目前会提供response，header，cookie，status_code等一大堆数据，放到一个字典供用户去取值），这点的话，对于每个要用到的数据，他可以剥离出来，用例结构更透明，用到什么数据一目了然，有了类型的区别，也很容易分别出这个变量来自"),t("code",[s._v("哪里")]),s._v("，是response，还是response_header。")]),s._v(" "),t("p",[s._v('当然它定义的变量也是可以给后面的任意接口用的哦，这样就组成了一个出参列表，在必要的输入框还可以选择，提高用户的输入效率，避免用户输入以下这种不可控的取值"函数"(这里先姑且这么称呼):')]),s._v(" "),t("p",[t("code",[s._v("${response.data.0.field}")])]),s._v(" "),t("p",[s._v("所以，有时候不断借鉴，完善自己，也不失为一件坏事嘛。")]),s._v(" "),t("h3",{attrs:{id:"理清楚思路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#理清楚思路"}},[s._v("#")]),s._v(" 理清楚思路")]),s._v(" "),t("p",[s._v("我们捋一捋pts的思路，当来源为JSON或者header这种K/V(键值对的缩写，即key/value)数据的时候，它采用"),t("code",[s._v("JSONPath")]),s._v("取值。")]),s._v(" "),t("p",[s._v("而当来源为TEXT(文本)的时候，它又支持正则取值，这样就基本能满足我们大部分需求了，因为它还支持索引，比如我正则一下子取出很多值，可以选出其中一个，更是支持random（随机取值）。")]),s._v(" "),t("p",[s._v("总结来说，其实也就分为JSONpath和正则2种，正则还需要多一个索引取值。并不难，熟悉完了以后我们就可以定义参数表了。")]),s._v(" "),t("h4",{attrs:{id:"定义参数表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定义参数表"}},[s._v("#")]),s._v(" 定义参数表")]),s._v(" "),t("p",[s._v("新建app/models/out_parameters.py")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" sqlalchemy "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Column"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" String"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" INT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" UniqueConstraint\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("models"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("basic "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" PityBase\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PityTestCaseOutParameters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("PityBase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n    pity用例出参数据，与用例绑定\n    """')]),s._v("\n    __tablename__ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pity_out_parameters'")]),s._v("\n    __table_args__ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        UniqueConstraint"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'case_id'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deleted_at'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用例id")]),s._v("\n    case_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Column"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("INT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" nullable"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 参数名")]),s._v("\n    name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Column"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("String"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" nullable"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 来源类型")]),s._v("\n    source "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Column"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("INT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" nullable"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" default"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    comment"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0: Body(TEXT) 1: Body(JSON) 2: Header 3: Cookie 4: HTTP状态码"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 表达式")]),s._v("\n    expression "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Column"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("String"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取结果索引, 可以是random，也可以是all，还可以是数字")]),s._v("\n    match_index "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Column"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("String"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("__init__")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" expression"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" match_index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" case_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("super")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("__init__"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" name\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("case_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" case_id\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("expression "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" expression\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("match_index "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" match_index\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("source "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" source\n\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br")])]),t("p",[s._v("由于需要与case_id绑定，其他的就不需要多说了，都是上图中应该具备的字段：名称，用例id，来源，表达式，索引。")]),s._v(" "),t("h3",{attrs:{id:"编写dao层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编写dao层"}},[s._v("#")]),s._v(" 编写dao层")]),s._v(" "),t("p",[s._v("这里由于我们封装了一下，所以不需要很复杂即可完成。添加app/crud/test_case/TestCaseOutParametersDao.py，其实我一直觉得这个处理不是很优雅，但现状是可以放一放，毕竟能用，代码量也不多。")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("crud "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Mapper\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("models"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out_parameters "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" PityTestCaseOutParameters\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("utils"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("decorator "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" dao\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("utils"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("logger "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Log\n\n\n"),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@dao")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("PityTestCaseOutParameters"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" Log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PityTestCaseOutParametersDao"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PityTestCaseOutParametersDao")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Mapper"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pass")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("如果没有特殊的方法，直接继承即可。")]),s._v(" "),t("h3",{attrs:{id:"定义form表单"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定义form表单"}},[s._v("#")]),s._v(" 定义form表单")]),s._v(" "),t("p",[s._v("添加文件app/schema/testcase_out_parameters.py")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" pydantic "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" BaseModel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" validator\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("schema"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("base "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" PityModel\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PityTestCaseOutParametersForm")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BaseModel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),s._v("\n    case_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),s._v("\n    name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),s._v("\n    expression"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),s._v("\n    match_index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),s._v("\n    source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@validator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"expression"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("name_not_empty")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cls"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" v"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" PityModel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("not_empty"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("v"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h3",{attrs:{id:"编写router层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编写router层"}},[s._v("#")]),s._v(" 编写router层")]),s._v(" "),t("p",[s._v("修改app/routers/testcase/testcase.py")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://files.mdnice.com/user/11504/f58a4d0f-4399-4c69-9927-0ce1d5e350a9.png",alt:""}})]),s._v(" "),t("p",[s._v("由于做了全局异常捕获，所以这把的try/except就省略了，不抛异常即可视为正常了。")]),s._v(" "),t("p",[s._v("注意这儿"),t("code",[s._v("没有查询接口")]),s._v("，那是因为参数都是和用例绑定的，我们到查询用例信息的时候查询数据即可。")]),s._v(" "),t("h3",{attrs:{id:"修改查询用例的接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改查询用例的接口"}},[s._v("#")]),s._v(" 修改查询用例的接口")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://files.mdnice.com/user/11504/6b9a3452-749c-4424-8a99-b30210f75b3f.png",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"这里顺便把out-parameters查询出来即可。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#这里顺便把out-parameters查询出来即可。"}},[s._v("#")]),s._v(" 这里顺便把out_parameters查询出来即可。")]),s._v(" "),t("p",[s._v("这节内容主要给大家展示一个其他优秀平台的设计，下一节我们讲讲怎么编写前端部分，使得我们可以正常录入数据，先来看个预告：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://files.mdnice.com/user/11504/f72bba4e-5007-42be-90f8-4c382bacf551.png",alt:""}})]),s._v(" "),t("p",[s._v("(写前端实在很花时间=。=)")]),s._v(" "),t("blockquote",[t("p",[s._v("我是米洛，一直陪伴各位学习！免费的"),t("code",[s._v("小黄心")]),s._v("，帮我点一个吧！")]),s._v(" "),t("p",[s._v("项目地址: "),t("a",{attrs:{href:"https://github.com/wuranxu/pity",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/wuranxu/pity"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);