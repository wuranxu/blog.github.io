(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{447:function(s,t,a){"use strict";a.r(t);var e=a(2),v=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"什么是虚拟环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是虚拟环境"}},[s._v("#")]),s._v(" 什么是虚拟环境")]),s._v(" "),t("p",[s._v("我们在使用Python的时候，通常用"),t("code",[s._v("pip")]),s._v("来进行包管理。比如我们要安装一个叫"),t("code",[s._v("requests")]),s._v("的库，那么我们就会采用以下命令去安装:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("pip "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" requests\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("那你知道，这个"),t("code",[s._v("requests")]),s._v("被安装到哪里去了吗？")]),s._v(" "),t("p",[s._v("其实，这个requests库被安装到 "),t("strong",[s._v("Python安装目录/Lib/site-packages")]),s._v("下面。要知道，site-packages是一个"),t("code",[s._v("全局包路径")]),s._v("。")]),s._v(" "),t("p",[s._v("啥意思呢？就是说，我安装的"),t("code",[s._v("requests")]),s._v("这个库对"),t("strong",[s._v("这台电脑")]),s._v("的"),t("strong",[s._v("这个版本")]),s._v("的Python都生效。")]),s._v(" "),t("p",[s._v("那这样会"),t("code",[s._v("造成一个问题")]),s._v(":")]),s._v(" "),t("blockquote",[t("p",[s._v("如果requests在1.0版本和1.1版本发生了较大变化，比如:"),t("br"),s._v("\n1.0版本的时候有个方法叫"),t("code",[s._v("requests.get")]),s._v("，到了1.1版本，这个包改名叫"),t("code",[s._v("requests.got")]),s._v(", 然后还"),t("code",[s._v("支持了不少新特性")]),s._v("。")])]),s._v(" "),t("p",[s._v("如果我有一个"),t("code",[s._v("很老的")]),s._v("项目，一直用的是1.0的版本，而我现在写了一个新项目，"),t("strong",[s._v("又想用到")]),s._v("1.1版本的最新特性。")]),s._v(" "),t("p",[s._v("那我如果只有一个版本的requests，我就没法兼容"),t("code",[s._v("新项目")]),s._v("和"),t("code",[s._v("旧项目")]),s._v("了。")]),s._v(" "),t("p",[s._v("所以我们有了虚拟环境的概念，其实也可以说是"),t("code",[s._v("隔离环境")]),s._v("。说简单点就是，这个python的库管理跟随你的项目走，你项目里就算"),t("code",[s._v("用到100个库")]),s._v("，也不会给你装到全局去，这样就隔离了全局的库。")]),s._v(" "),t("h3",{attrs:{id:"安装virtualenv"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装virtualenv"}},[s._v("#")]),s._v(" 安装virtualenv")]),s._v(" "),t("p",[s._v("而达到这样的目的，都是基于一款python的库: "),t("code",[s._v("virtualenv")]),s._v("。(它支持python2和3)")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("pip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" virtualenv\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("tips: 有的python库，他不一定是给python代码调用的，你可以把它想象成一个"),t("code",[s._v("可执行程序")]),s._v("，比如我们常用的gunicorn，虽然是通过pip安装，但是安装好了之后它是一个"),t("code",[s._v("可执行程序")]),s._v("。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://static.pity.fun/picture/2021-9-27/1632735843084-image.png",alt:"我们可以在Python安装目录的Scripts看到这些可执行程序"}})]),s._v(" "),t("h3",{attrs:{id:"创建虚拟环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建虚拟环境"}},[s._v("#")]),s._v(" 创建虚拟环境")]),s._v(" "),t("p",[s._v("安装好virtualenv以后，我们就可以来开辟一个虚拟环境，用于隔离全局的库了。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("virtualenv venv\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在我们的"),t("code",[s._v("项目根目录")]),s._v("下执行这个命令，可以看到一些提示:")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://static.pity.fun/picture/2021-9-27/1632735993166-image.png",alt:"可以看到它帮我们创建好了虚拟环境，并带上了pip和setuptools"}})]),s._v(" "),t("h3",{attrs:{id:"启用虚拟环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启用虚拟环境"}},[s._v("#")]),s._v(" 启用虚拟环境")]),s._v(" "),t("p",[s._v("我们根目录下会多一个venv的文件夹，里面有点东西。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://static.pity.fun/picture/2021-9-27/1632736070869-image.png",alt:'可以看到，基本上这就是一个小的"包管理目录"呀'}})]),s._v(" "),t("p",[s._v("别急，我们还得先激活这个"),t("code",[s._v("虚拟环境")]),s._v("。")]),s._v(" "),t("ul",[t("li",[s._v("Mac/Linux")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" venv/bin/activate\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("Windows")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("venv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Scripts"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("activate\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("其实可以看到，venv的Scripts里面有个activate.bat（激活虚拟环境脚本），而Unix系统下自带source，所以有些区别。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://static.pity.fun/picture/2021-9-27/1632736397330-image.png",alt:"如果前缀带上了venv的标识，说明你成功了"}})]),s._v(" "),t("p",[s._v("接着你就可以在虚拟环境畅游了，你所有安装/卸载的包都会在venv目录下被安排的"),t("strong",[s._v("服服帖帖")]),s._v("的，不会被影响"),t("code",[s._v("也不会影响")]),s._v("到全局的库。")]),s._v(" "),t("h3",{attrs:{id:"退出虚拟环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#退出虚拟环境"}},[s._v("#")]),s._v(" 退出虚拟环境")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" venv/bin/deactivate\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("Windows")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("venv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Scripts"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("deactivate\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("用deactivate就好了，这样你的包管理又回到了全局，venv标识也消失不见了。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://static.pity.fun/picture/2021-9-27/1632736545329-image.png",alt:"带不带.bat都是一样的，不需要纠结"}})]),s._v(" "),t("p",[s._v("其实这个很像"),t("code",[s._v("node_modules")]),s._v("，node_modules在项目的根目录生成，并通过package.json进行包的"),t("code",[s._v("版本管理")]),s._v("，不影响全局模式，非常好用。")]),s._v(" "),t("p",[s._v("简单的说就是各玩各的，"),t("code",[s._v("互不干扰")]),s._v("！")]),s._v(" "),t("p",[s._v("标题从3分钟->5分钟，最后改为几分钟，你读完了么？反正我是读完了！")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://static.pity.fun/picture/2021-9-27/1632744089056-image.png",alt:""}})])])}),[],!1,null,null,null);t.default=v.exports}}]);