(window.webpackJsonp=window.webpackJsonp||[]).push([[191],{603:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("blockquote",[t("p",[s._v("å¤§å®¶å¥½~æˆ‘æ˜¯"),t("code",[s._v("ç±³æ´›")]),s._v("ï¼"),t("br"),s._v("\næˆ‘æ­£åœ¨ä»0åˆ°1æ‰“é€ ä¸€ä¸ªå¼€æºçš„æ¥å£æµ‹è¯•å¹³å°, ä¹Ÿåœ¨ç¼–å†™ä¸€å¥—ä¸ä¹‹å¯¹åº”çš„"),t("code",[s._v("æ•™ç¨‹")]),s._v("ï¼Œå¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒã€‚"),t("br"),s._v("\næ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·"),t("code",[s._v("ç±³æ´›çš„æµ‹å¼€æ—¥è®°")]),s._v("ï¼Œè·å–æœ€æ–°æ–‡ç« æ•™ç¨‹!")])]),s._v(" "),t("h3",{attrs:{id:"å›é¡¾"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å›é¡¾"}},[s._v("#")]),s._v(" å›é¡¾")]),s._v(" "),t("p",[s._v("ä¸Šä¸€èŠ‚æˆ‘ä»¬ç¼–å†™äº†"),t("code",[s._v("åœ¨çº¿æ‰§è¡Œæµ‹è¯•è®¡åˆ’")]),s._v("åŠŸèƒ½ï¼Œå¹¶ç¨å¾®æ”¹äº†ä¸‹æŠ¥å‘Šé¡µé¢ã€‚é‚£å…¶å®æˆ‘ä»¬ä¹‹å‰çš„å†…å®¹éƒ½æ˜¯æœ‰å¾ˆå¤š"),t("strong",[s._v("å‘")]),s._v("åœ¨é‡Œé¢çš„ã€‚")]),s._v(" "),t("p",[s._v("æ¯”å¦‚httpè¯·æ±‚åªæ”¯æŒäº†jsonå’Œformï¼Œæ²¡æœ‰æ”¯æŒ"),t("code",[s._v("æ–‡ä»¶ä¸Šä¼ ")]),s._v("çš„è¯·æ±‚ï¼Œç”šè‡³æœ‰ä¸€äº›crudçš„åŠŸèƒ½éƒ½æ²¡æœ‰å¤ªå®Œå–„ã€‚")]),s._v(" "),t("p",[s._v("ä¸è¿‡ä¸è¦ç´§ï¼Œæˆ‘çš„æƒ³æ³•è¿˜æ˜¯å…ˆ"),t("code",[s._v("åˆ›é€ ")]),s._v("ï¼Œå†å®Œå–„ã€‚å½“ç„¶ä¹Ÿä¸æ˜¯ç›²ç›®åˆ›é€ ï¼Œä¹Ÿå¾—æå‰é¢„åˆ¤å¥½åé¢çš„èµ°å‘ã€‚")]),s._v(" "),t("h3",{attrs:{id:"ä¸ºä»€ä¹ˆè¦ç”¨oss"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦ç”¨oss"}},[s._v("#")]),s._v(" ä¸ºä»€ä¹ˆè¦ç”¨oss")]),s._v(" "),t("p",[s._v("pityé‡Œé¢ossæ‰“ç®—ç”¨åœ¨2ä¸ªåœ°æ–¹ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯ä¸€äº›é™æ€èµ„æºå›¾ç‰‡ã€‚æ¯”æ–¹è¯´"),t("code",[s._v("é¡¹ç›®å›¾ç‰‡")]),s._v("ï¼Œ"),t("code",[s._v("ç”¨æˆ·å¤´åƒ")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("å¦ä¸€ä¸ªåœ°æ–¹å°±æ˜¯ä¸Šæ–‡è¯´çš„ï¼Œæµ‹è¯•æ–‡ä»¶ä¸Šä¼ æ¥å£çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦"),t("code",[s._v("æµ‹è¯•æ–‡ä»¶")]),s._v("ã€‚è¿™äº›æ–‡ä»¶æ€ä¹ˆæ¥ï¼Œæ€ä¹ˆç®¡ç†ï¼Ÿéƒ½å¾—å€ŸåŠ©ossæ¥å®Œæˆã€‚")]),s._v(" "),t("p",[s._v("ç›®å‰ä»¥æˆ‘ç†Ÿæ‚‰çš„ossä¸ºä¾‹ï¼Œæ‰“ç®—æ”¯æŒä»¥ä¸‹å‡ ç§oss:")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("[x] é˜¿é‡Œäº‘oss âœ”")])]),s._v(" "),t("li",[t("p",[s._v("[x] "),t("s",[s._v("è…¾è®¯äº‘cos")]),s._v("(æ— è´¦å·) ğŸ’Š")])]),s._v(" "),t("li",[t("p",[s._v("[x] ä¸ƒç‰›äº‘(å…è´¹ï¼Œæˆ‘èƒ½ç»™å±•ç¤ºdemo)")])]),s._v(" "),t("li",[t("p",[s._v("[x] gitee(å…è´¹)")]),s._v(" "),t("p",[s._v("å…¶ä¸­é˜¿é‡Œäº‘å’Œè…¾è®¯äº‘ç”±äºéƒ½æ˜¯"),t("code",[s._v("ä»˜è´¹äº§å“")]),s._v("ï¼Œåšä¸»è¿˜æ˜¯ä¹°ä¸èµ·çš„ã€‚æ‰€ä»¥å¯èƒ½éœ€è¦æœ‰å¯¹åº”çš„æµ‹è¯•è´¦å·ï¼Œåœ¨æ­¤æ„Ÿè°¢å°å³(Mini-Right)çš„å¸®åŠ©ï¼Œç»™äº†æˆ‘ä¸€ä¸ªé˜¿é‡Œäº‘çš„æµ‹è¯•è´¦å·ï¼Œä¿è¯äº†crudèƒ½æ­£å¸¸è¿›è¡Œã€‚")]),s._v(" "),t("p",[t("strong",[s._v("å¦‚æœéœ€è¦æˆ‘å®ç°å…¶ä»–osså®¢æˆ·ç«¯ï¼Œè¯·å¸¦ä¸Šå¯¹åº”çš„æµ‹è¯•è´¦å·ç§ä¿¡æˆ‘å“ˆã€‚")])]),s._v(" "),t("p",[s._v("æµ‹è¯•ç½‘ç«™çš„æ•°æ®ä¼°è®¡ä¼šç”¨"),t("code",[s._v("gitee")]),s._v("æˆ–è€…"),t("code",[s._v("ä¸ƒç‰›äº‘")]),s._v("ã€‚")])])]),s._v(" "),t("h3",{attrs:{id:"è¯´æ˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¯´æ˜"}},[s._v("#")]),s._v(" è¯´æ˜")]),s._v(" "),t("p",[s._v("å…³äºæ–‡ä»¶ç®¡ç†è¿™å—ï¼Œç”±äºæ—¶é—´å…³ç³»ï¼Œæˆ‘"),t("code",[s._v("æš‚æ—¶ä¸ä¼š")]),s._v("è½ä¸€å¼ è¡¨ä¸ossæ•°æ®è¿›è¡Œå…³è”ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†"),t("code",[s._v("èŠ‚çœæ—¶é—´")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("è¡¨å…³è”å¯ä»¥ä½œä¸ºäºŒæœŸå·¥ç¨‹ã€‚")]),s._v(" "),t("h3",{attrs:{id:"ç¼–å†™ossåŸºç±»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™ossåŸºç±»"}},[s._v("#")]),s._v(" ç¼–å†™ossåŸºç±»")]),s._v(" "),t("p",[s._v("æ–°å»º"),t("code",[s._v("app.middleware.oss.oss_file.py")])]),s._v(" "),t("p",[s._v("ç”±äºå’±ä»¬æ”¯æŒå¤šç§osså®¢æˆ·ç«¯ï¼Œæ‰€ä»¥åŒ…è£…å¥½ä¸€ä¸ªæŠ½è±¡ç±»ï¼ˆç±»ä¼¼goçš„interfaceï¼‰ç­‰ç€å„ä¸ª"),t("code",[s._v("osså®¢æˆ·ç«¯")]),s._v("å»å®ç°ä¹‹ã€‚")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" abc "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" ABC"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" abstractmethod\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" typing "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" ByteString\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OssFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ABC"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@abstractmethod")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("create_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ByteString"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pass")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@abstractmethod")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("update_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ByteString"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pass")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@abstractmethod")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("delete_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pass")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@abstractmethod")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("list_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pass")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@abstractmethod")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("download_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pass")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("p",[s._v("æŠ½è±¡ç±»æ²¡æœ‰å…·ä½“çš„å®ç°ï¼Œåªæœ‰æ–¹æ³•çš„å®šä¹‰ï¼Œç›®çš„æ˜¯ä¸ºäº†"),t("code",[s._v("é™åˆ¶å­ç±»çš„æ–¹æ³•ï¼Œå³å¿…é¡»å®ç°åŸºç±»ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚")])]),s._v(" "),t("p",[s._v("æ€»ç»“äº†ä¸€ä¸‹ï¼Œå¿…é¡»æœ‰"),t("code",[s._v("å¢åˆ æ”¹æŸ¥ä¸‹è½½")]),s._v("5ç§æ–¹æ³•ã€‚")]),s._v(" "),t("h3",{attrs:{id:"ç¼–å†™aliyunosså®ç°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™aliyunosså®ç°"}},[s._v("#")]),s._v(" ç¼–å†™AliyunOsså®ç°")]),s._v(" "),t("p",[s._v("æ–°å»º"),t("code",[s._v("app.middleware.oss.aliyun.py")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" typing "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" ByteString\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" oss2\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("middleware"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("oss"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("files "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" OssFile\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AliyunOss")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OssFile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("__init__")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" access_key_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" access_key_secret"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" endpoint"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        auth "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oss2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("access_key_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("access_key_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                         access_key_secret"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("access_key_secret"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# auth = oss2.AnonymousAuth()")]),s._v("\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bucket "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oss2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" endpoint"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("create_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ByteString"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("put_object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("update_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ByteString"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("put_object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("delete_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("delete_object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("list_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        ans "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" obj "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" oss2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ObjectIteratorV2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            ans"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("append"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("dict")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("obj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" last_modified"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("obj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("last_modified"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                            size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("obj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("size"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" owner"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("obj"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("owner"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" ans\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("download_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("object_exists"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("raise")]),s._v(" Exception"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-interpolation"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('f"ossæ–‡ä»¶: ')]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('ä¸å­˜åœ¨"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" self"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get_object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br")])]),t("p",[s._v("AliyunOss"),t("strong",[s._v("ç»§æ‰¿")]),s._v("äº†OssFileï¼Œæ„é€ æ–¹æ³•è·å–é˜¿é‡Œäº‘çš„èº«ä»½ä¿¡æ¯ï¼Œå¹¶éªŒè¯ã€‚æœ€åè¯»å–bucketï¼Œè¿™bucketæˆ‘ç†è§£çš„æ˜¯ä¸€å—"),t("code",[s._v("åŒºåŸŸ")]),s._v("ï¼Œä½ çš„æ–‡ä»¶éƒ½å­˜å‚¨åœ¨è¿™å—åŒºåŸŸé‡Œé¢ï¼Œæˆ‘ä»¬å°±å«ä»–Fç›˜å§ã€‚")]),s._v(" "),t("p",[s._v("å…¶ä»–çš„æ–¹æ³•å¾ˆç®€å•ï¼ŒåŸºæœ¬ä¸Šæ˜¯è°ƒç”¨å¯¹åº”çš„apiï¼Œå»åšcrudæ“ä½œã€‚ossæ²¡æœ‰"),t("code",[s._v("æ–‡ä»¶å¤¹")]),s._v("çš„æ¦‚å¿µï¼Œéƒ½æ˜¯ç»Ÿä¸€ç”¨è·¯å¾„æ¥å­˜å‚¨æ–‡ä»¶åœ°å€çš„ï¼Œæ¯”å¦‚:")]),s._v(" "),t("p",[s._v("woody/github.txt")]),s._v(" "),t("p",[s._v("è¿™ä¸ªæ–‡ä»¶è·¯å¾„å¯ä»¥ç†è§£ä¸ºï¼Œwoodyç›®å½•ä¸‹çš„"),t("code",[s._v("github.txt")]),s._v("æ–‡ä»¶ã€‚")]),s._v(" "),t("h3",{attrs:{id:"ç¼–å†™è·å–å®¢æˆ·ç«¯æ–¹æ³•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™è·å–å®¢æˆ·ç«¯æ–¹æ³•"}},[s._v("#")]),s._v(" ç¼–å†™è·å–å®¢æˆ·ç«¯æ–¹æ³•")]),s._v(" "),t("p",[t("code",[s._v("app.middleware.oss._\\_init__.py")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("core"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("configuration "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" SystemConfiguration\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("middleware"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("oss"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("aliyun "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" AliyunOss\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("middleware"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("oss"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("files "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" OssFile\n\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OssClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    _client "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@classmethod")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get_oss_client")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cls"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" OssFile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n        é€šè¿‡ossé…ç½®æ‹¿åˆ°osså®¢æˆ·ç«¯\n        :return:\n        """')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" OssClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_client "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("is")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            cfg "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" SystemConfiguration"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get_config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            oss_config "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cfg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"oss"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            access_key_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oss_config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"access_key_id"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            access_key_secret "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oss_config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"access_key_secret"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            bucket "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oss_config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bucket"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            endpoint "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oss_config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"endpoint"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" oss_config "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("is")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("raise")]),s._v(" Exception"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"æœåŠ¡å™¨æœªé…ç½®ossä¿¡æ¯, è¯·åœ¨configuration.jsonä¸­æ·»åŠ "')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" oss_config"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lower"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aliyun"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" AliyunOss"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("access_key_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" access_key_secret"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" endpoint"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" bucket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("raise")]),s._v(" Exception"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ä¸æ”¯æŒçš„ossç±»å‹"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" OssClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("_client\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])]),t("p",[s._v("æˆ‘ä»¬åœ¨configuration.jsoné…ç½®ossä¿¡æ¯ï¼Œæ¥ç€æ¯æ¬¡éƒ½ä»OssClientè·å–å®¢æˆ·ç«¯å³å¯ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://static.pity.fun/picture/2021-11-27/1638022147065-image.png",alt:"æˆ‘ä»¬æ ¹æ®è¿™ä¸ªç±»å‹æ¥åˆ¤æ–­ossçš„ç±»å‹"}})]),s._v(" "),t("h3",{attrs:{id:"ç¼–å†™åç«¯æ¥å£"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™åç«¯æ¥å£"}},[s._v("#")]),s._v(" ç¼–å†™åç«¯æ¥å£")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" fastapi "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" APIRouter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" File"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" UploadFile\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("handler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fatcory "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" PityResponse\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("middleware"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("oss "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" OssClient\n\nrouter "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" APIRouter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/oss"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@router"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("post")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/upload"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("create_oss_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" UploadFile "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" File"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        file_content "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("read"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è·å–osså®¢æˆ·ç«¯")]),s._v("\n        client "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" OssClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get_oss_client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("create_file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" file_content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" PityResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("except")]),s._v(" Exception "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" PityResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("failed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-interpolation"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('f"ä¸Šä¼ å¤±è´¥: ')]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@router"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/list"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("list_oss_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        client "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" OssClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get_oss_client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        files "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("list_file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" PityResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("files"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("except")]),s._v(" Exception "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" PityResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("failed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-interpolation"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('f"è·å–å¤±è´¥: ')]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@router"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/delete"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("delete_oss_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        client "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" OssClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get_oss_client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("delete_file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" PityResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("except")]),s._v(" Exception "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" PityResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("failed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-interpolation"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('f"åˆ é™¤å¤±è´¥: ')]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[s._v("@router"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("post")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/update"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("update_oss_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" UploadFile "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" File"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n    æ›´æ–°ossæ–‡ä»¶ï¼Œè·¯å¾„ä¸èƒ½å˜åŒ–\n    :param filepath:\n    :param file:\n    :return:\n    """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        client "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" OssClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get_oss_client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        file_content "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("read"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("update_file"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("filepath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" file_content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" PityResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("except")]),s._v(" Exception "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" PityResponse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("failed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-interpolation"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('f"åˆ é™¤å¤±è´¥: ')]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br")])]),t("p",[s._v("æ–¹æ³•å¾ˆç®€å•ï¼Œæ–‡ä»¶è·¯å¾„åœ¨urlå‚æ•°é‡Œè¾¹ï¼Œæ–‡ä»¶çš„è¯ï¼Œåˆ©ç”¨fastapié‡Œé¢çš„Fileå’ŒUploadFileçš†å¯è·å–åˆ°ä¸Šä¼ çš„æ–‡ä»¶ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("æ³¨æ„ï¼Œå¿…é¡»å…ˆå®‰è£…python-multipartåº“é…åˆæ–‡ä»¶ä¸Šä¼ ")])]),s._v(" "),t("h3",{attrs:{id:"æµ‹è¯•ä¸€ä¸‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æµ‹è¯•ä¸€ä¸‹"}},[s._v("#")]),s._v(" æµ‹è¯•ä¸€ä¸‹")]),s._v(" "),t("p",[s._v("æˆåŠŸè¯»å–åˆ°äº†ossçš„æ–‡ä»¶ä¿¡æ¯ï¼Œä½†ä¸‹è½½æ¥å£")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://static.pity.fun/picture/2021-11-27/1638022289631-image.png",alt:""}})]),s._v(" "),t("p",[s._v("å¥½åƒå¿˜è®°ä¸‹è½½æ–‡ä»¶ç›¸å…³å†…å®¹äº†ï¼Œé‚£ä¹ˆå‚è€ƒæˆ‘çš„"),t("code",[s._v("ä¸Šä¸€ç¯‡FsatApiä¸‹è½½æ–‡ä»¶çš„æ–‡ç« ")]),s._v("å§ã€‚")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://juejin.cn/post/7029591719997865998",target:"_blank",rel:"noopener noreferrer"}},[s._v("FastApiä¸‹è½½æ–‡ä»¶"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("æˆ–è€…ç›´æ¥å»githubæŸ¥çœ‹æºç ~")]),s._v(" "),t("p",[s._v("ä»Šå¤©çš„å†…å®¹å°±ä»‹ç»åˆ°è¿™é‡Œäº†ï¼Œä¸‹ä¸€èŠ‚å·ossçš„ç”¨é€”ã€‚")])])}),[],!1,null,null,null);t.default=e.exports}}]);