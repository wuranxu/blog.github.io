(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{512:function(t,a,s){"use strict";s.r(a);var r=s(2),n=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"搭建flask服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建flask服务"}},[t._v("#")]),t._v(" 搭建Flask服务")]),t._v(" "),a("h3",{attrs:{id:"项目地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目地址"}},[t._v("#")]),t._v(" 项目地址")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/wuranxu/pity",target:"_blank",rel:"noopener noreferrer"}},[t._v("点我进入项目地址"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("代码都会在这里有所展示，喜欢的话可以帮点个star，谢谢大家了！如果你喜欢该教程，也可以分享给其他人。")]),t._v(" "),a("h3",{attrs:{id:"关于选型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于选型"}},[t._v("#")]),t._v(" 关于选型")]),t._v(" "),a("p",[t._v("想了很久，本来打算用"),a("strong",[t._v("Gin")]),t._v("做为后端服务，或者作为网关层，后面想了一下好像没这个必要。这个平台的用户量会比较有限，而且也会做一定的"),a("strong",[t._v("服务拆分")]),t._v("。于是还是采用了更大众一点的口味: "),a("strong",[t._v("Flask")]),t._v("，有的同学可能会说，那怎么不用"),a("strong",[t._v("Django")]),t._v("？")]),t._v(" "),a("p",[t._v("哈哈，问到点了，"),a("strong",[t._v("Django")]),t._v("笔者是真不会，基本上没有接触过，从接触"),a("strong",[t._v("Python Web开发")]),t._v("的时候，我就用的是"),a("strong",[t._v("Flask")]),t._v("。好在"),a("strong",[t._v("Flask")]),t._v("比较精简，django用户也能比较快的上手。")]),t._v(" "),a("h3",{attrs:{id:"环境准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[t._v("#")]),t._v(" 环境准备")]),t._v(" "),a("p",[t._v("笔者其实比较好奇，不知道大家是要看一个很完整的过程，还是一个大概的，所以可能比较随性哈，复杂的地方尽量完整，毕竟又写文章又写代码的话，还是比较费事的。前期可能讲的比较仔细，后期可能以代码为主。所以有的地方如果有疑问的话，可以在文章下面评论或者联系本人。")]),t._v(" "),a("h4",{attrs:{id:"预备知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#预备知识"}},[t._v("#")]),t._v(" 预备知识")]),t._v(" "),a("ol",[a("li",[t._v("熟悉pip的使用方法")]),t._v(" "),a("li",[t._v("熟悉Python语法")]),t._v(" "),a("li",[t._v("熟悉Pycharm用法")])]),t._v(" "),a("h4",{attrs:{id:"工具-软件准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工具-软件准备"}},[t._v("#")]),t._v(" 工具/软件准备")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("IDE: "),a("a",{attrs:{href:"https://www.jetbrains.com/pycharm/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Pycharm"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://www.python.org/downloads/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python3.4"),a("OutboundLink")],1),t._v("以上")]),t._v(" "),a("p",[t._v("最好是3.4以上，笔者这里比较随意，用的是3.7版本，没有太大的区别。")])])]),t._v(" "),a("h3",{attrs:{id:"最简单的例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最简单的例子"}},[t._v("#")]),t._v(" 最简单的例子")]),t._v(" "),a("p",[t._v("笔者目前的目录在: "),a("code",[t._v("J:\\projects\\github.com\\wuranxu")])]),t._v(" "),a("p",[t._v("以后的代码都会以这个目录为准，仅供参考。")]),t._v(" "),a("h4",{attrs:{id:"创建项目并通过pycharm打开"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建项目并通过pycharm打开"}},[t._v("#")]),t._v(" 创建项目并通过Pycharm打开")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://static.pity.fun/picture/2021-9-15/1631713845196-image.png",alt:""}})]),t._v(" "),a("h4",{attrs:{id:"安装flask包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装flask包"}},[t._v("#")]),t._v(" 安装Flask包")]),t._v(" "),a("p",[t._v("在当前目录(pity)下打开终端并输入:")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("pip3 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" flask\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("如果安装过程很缓慢，可以加上豆瓣源:")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("pip3 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" flask "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" https://pypi.douban.com/simple\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-7/1615124871306-image.png",alt:""}})]),t._v(" "),a("p",[t._v("由于笔者已经安装好了，所以没有详细的安装过程。")]),t._v(" "),a("h4",{attrs:{id:"初始化app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化app"}},[t._v("#")]),t._v(" 初始化app")]),t._v(" "),a("p",[t._v("建立"),a("code",[t._v("pity/app/__init__.py")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://static.pity.fun/picture/2021-9-15/1631713815355-image.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://static.pity.fun/picture/2021-9-15/1631713800475-image.png",alt:""}})]),t._v(" "),a("p",[t._v("编辑"),a("code",[t._v("__init__.py")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" flask "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Flask\n\npity "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Flask"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__name__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("代码讲解: 这是flask的"),a("strong",[t._v("约定用法")]),t._v(", 引入Flask类并实例化了一个Flask对象, 其中__name__为通俗写法。")]),t._v(" "),a("p",[t._v('至此，我们就得到了这样的一个名为"pity"的Flask'),a("strong",[t._v("实例")]),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"编写web服务文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写web服务文件"}},[t._v("#")]),t._v(" 编写Web服务文件")]),t._v(" "),a("p",[t._v("编写"),a("code",[t._v("pity/run.py")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pity\n\n\n"),a("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@pity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("route")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hello_world")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello World!'")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    pity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" threaded"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" port"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7777"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[t._v("其中"),a("code",[t._v('@pity.route("/")')]),t._v("是一个"),a("strong",[t._v("装饰器")]),t._v(", 代表hello_world这个函数与路由"),a("code",[t._v("/")]),t._v("进行绑定，也就是说当访问到"),a("code",[t._v("/")]),t._v("路由的时候，函数hello_world会自动执行。")]),t._v(" "),a("p",[a("code",[t._v('pity.run("0.0.0.0", threaded=True, port="7777")')]),t._v("\n这句话表示启动web服务, 第一个参数0.0.0.0表示接受任何ip的访问，threaded表示如果有多人同时访问一个接口时是非阻塞的，port代表服务挂载的端口，这里我们以"),a("strong",[t._v("clearlove")]),t._v("为端口号: 7777。")]),t._v(" "),a("h3",{attrs:{id:"尝试一下吧"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#尝试一下吧"}},[t._v("#")]),t._v(" 尝试一下吧！")]),t._v(" "),a("p",[t._v("运行run.py，可在pycharm运行也可以在终端里输入"),a("code",[t._v("python3 run.py")]),t._v("运行。")]),t._v(" "),a("p",[t._v("可以看到"),a("code",[t._v("Running on http://0.0.0.0:7777")]),t._v(", 说明服务启动成功了！")]),t._v(" "),a("h4",{attrs:{id:"验证一下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证一下"}},[t._v("#")]),t._v(" 验证一下")]),t._v(" "),a("p",[t._v("咱们都知道"),a("strong",[t._v("HTTP")]),t._v("是有很多种方法的，咱们这种pity.route如果没有指定方法的话，默认就是"),a("strong",[t._v("GET")]),t._v("方法。")]),t._v(" "),a("p",[t._v("打开浏览器输入: "),a("code",[t._v("http://localhost:7777/")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://static01.imgkr.com/temp/4fd570c42475463f91035a860777b789.png",alt:""}})]),t._v(" "),a("p",[t._v("如果看到这个hello world说明你成功了！")]),t._v(" "),a("p",[t._v("今天的课程就到这里了，下期见。说实话写的有点累，代码没写几行，屁话写了一大堆，后面可能要加快速度了！")]),t._v(" "),a("p",[t._v("全部代码地址: "),a("a",{attrs:{href:"https://github.com/wuranxu/pity",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/wuranxu/pity"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("strong",[t._v("觉得有用的话可以帮忙点个Star哦QAQ")])])])}),[],!1,null,null,null);a.default=n.exports}}]);