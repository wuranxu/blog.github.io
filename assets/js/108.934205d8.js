(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{518:function(t,s,a){"use strict";a.r(s);var r=a(2),e=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"编写类postman页面-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编写类postman页面-5"}},[t._v("#")]),t._v(" 编写类postman页面(5)")]),t._v(" "),s("h3",{attrs:{id:"回顾"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#回顾"}},[t._v("#")]),t._v(" 回顾")]),t._v(" "),s("p",[t._v("上节我们把流程串起来了，但是还没来得及编写返回页面。那么我们今天就把返回结果展示出来。")]),t._v(" "),s("h3",{attrs:{id:"思考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#思考"}},[t._v("#")]),t._v(" 思考")]),t._v(" "),s("p",[t._v("这边补充一下，刚才我尝试在自己的云服务器部署pity项目，但是发现自己给自己挖了个坑。")]),t._v(" "),s("p",[t._v("pity项目没有配置"),s("strong",[t._v("requirements.txt")]),t._v("，导致许多软件版本没有安装，服务跑不起来；")]),t._v(" "),s("p",[t._v("接着我们就把需要安装的补全一下！")]),t._v(" "),s("p",[s("code",[t._v("新建pity/requirements.txt文件")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("flask-cors\nlogbook\npyjwt==1.7.1\nmysql-connector-python\nflask-sqlalchemy\nflask\nrequests\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("ul",[s("li",[t._v("安装完整版本:")])]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pip3 install -r requirements.txt\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"编写返回结果页面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编写返回结果页面"}},[t._v("#")]),t._v(" 编写返回结果页面")]),t._v(" "),s("p",[t._v("我们发现，在请求body为"),s("strong",[t._v("none")]),t._v("的情况下，这个body会压缩到tab页上，如果咱们要展示response的话，"),s("strong",[t._v("response")]),t._v("也会被挤上去，这样就非常难看，所以我们进行一下改造:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615811047813-image.png",alt:""}})]),t._v(" "),s("p",[t._v("我们把bodyType === 'raw'改成'none'，因为我们这边暂时只支持JSON形式的数据，所以暂时可以这么写，针对none的时候额外写一个div组件，并给它设置好高度和文本居中，这样就有内味了！")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615811139402-image.png",alt:"这是我在mac上的显示效果(今天在公司摸鱼写文章)"}})]),t._v(" "),s("h4",{attrs:{id:"编写tabs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编写tabs"}},[t._v("#")]),t._v(" 编写Tabs")]),t._v(" "),s("p",[t._v("上图已经快看到实际效果了，最终代码还得润色一下。")]),t._v(" "),s("h4",{attrs:{id:"改写编辑器方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#改写编辑器方法"}},[t._v("#")]),t._v(" 改写编辑器方法")]),t._v(" "),s("p",[t._v("目前我们的编辑器，初始值字段是"),s("code",[t._v("defaultValue")]),t._v("，这样的话一旦刷新了返回结果，那么这个值不会再次更新，所以我们需要改写，具体的方法就是让Editor变成"),s("strong",[t._v("受控组件")]),t._v("。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615819473234-image.png",alt:"去掉defaultValue字段，改为value"}})]),t._v(" "),s("ul",[s("li",[t._v("编写Body tab下的编辑器")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615820016594-image.png",alt:""}})]),t._v(" "),s("p",[t._v("简单封装并引用了一下，JSON.stringify这个方法是用来序列化JSON的，后面的参数是为了让JSON更美观。")]),t._v(" "),s("p",[t._v("可能大家有注意到有个tarBarExtra...这样的字段，这个字段呢，是我们用来显示http状态码和相应时间的，对比postman就是:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615820100277-image.png",alt:""}})]),t._v(" "),s("p",[t._v("因为里面内容很多，所以我把它作为一个组件抽离出来。")]),t._v(" "),s("ul",[s("li",[t._v("编写http状态码组件")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615820433748-image.png",alt:""}})]),t._v(" "),s("p",[t._v("最终结果就是这样，简单的html代码。")]),t._v(" "),s("p",[t._v("这里肯定有小伙伴有"),s("strong",[t._v("疑惑")]),t._v("，为什么你把style这种文件放到css里面去呢？其实不是我不想，是"),s("strong",[t._v("因为我懒")]),t._v("，而且需要我手动写样式的地方其实还蛮少的，如果写的一般是在同级目录编写"),s("code",[t._v("同名文件.less")]),t._v("，里面用less的语法去写样式，这里我求方便，就一锅端了。")]),t._v(" "),s("h4",{attrs:{id:"大概效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#大概效果"}},[t._v("#")]),t._v(" 大概效果:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615820477851-image.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"稍微调整一下之前的代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#稍微调整一下之前的代码"}},[t._v("#")]),t._v(" 稍微调整一下之前的代码")]),t._v(" "),s("p",[t._v("请求部分和全局的response冲突了，调整一下:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615820762717-image.png",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615820789361-image.png",alt:""}})]),t._v(" "),s("p",[t._v("高度也给降低一点，不然太高了，一点都不拿破仑！")]),t._v(" "),s("h3",{attrs:{id:"改写request类-获取cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#改写request类-获取cookie"}},[t._v("#")]),t._v(" 改写Request类 获取cookie")]),t._v(" "),s("p",[t._v("我们之前的后端接口并没有拿出cookie信息，所以我们需要改造一下。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615821130597-image.png",alt:"和headers等类似"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615821159223-image.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"编写最后的部分"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编写最后的部分"}},[t._v("#")]),t._v(" 编写最后的部分")]),t._v(" "),s("p",[t._v("由于cookies和headers都是以表单的形式展示的，而且都是"),s("strong",[t._v("key-value")]),t._v("的格式，所以我们可以封装成Table组件。")]),t._v(" "),s("ul",[s("li",[t._v("编写columns")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615821701978-image.png",alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("编写根据不同字段（cookies和response_headers）来获取对应数据的方法")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615821738081-image.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"引入2个组件并且设置不分页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#引入2个组件并且设置不分页"}},[t._v("#")]),t._v(" 引入2个组件并且设置不分页")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615821764102-image.png",alt:""}})]),t._v(" "),s("p",[t._v("两块除了这里不一样，其他都是一样的。")]),t._v(" "),s("h3",{attrs:{id:"最终效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#最终效果"}},[t._v("#")]),t._v(" 最终效果")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-15/1615822249629-fgg.gif",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"广告时间"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#广告时间"}},[t._v("#")]),t._v(" 广告时间")]),t._v(" "),s("p",[s("em",[t._v("预览地址:")]),t._v(" "),s("a",{attrs:{href:"http://47.112.32.195/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://47.112.32.195/"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("后端代码地址: "),s("a",{attrs:{href:"https://github.com/wuranxu/pity",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/wuranxu/pity"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("前端代码地址: "),s("a",{attrs:{href:"https://github.com/wuranxu/pityWeb",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/wuranxu/pityWeb"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("欢迎关注公众号"),s("strong",[t._v("测试开发入坑")]),t._v("，还有加群一起讨论相关问题呀！如果群二维码过期了，可以加我个人微信: "),s("code",[t._v("wuranxu")]),t._v(" 我拉你进群~")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-10/1615391632083-image.png",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-3-10/1615390951439-image.png",alt:""}})])])}),[],!1,null,null,null);s.default=e.exports}}]);