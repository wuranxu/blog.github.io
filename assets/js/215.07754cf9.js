(window.webpackJsonp=window.webpackJsonp||[]).push([[215],{628:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("blockquote",[t("p",[s._v("大家好，我是米洛，求点赞!求关注!求分享！🙋🙋🙋")])]),s._v(" "),t("p",[s._v("关注公众号: "),t("strong",[s._v("米洛的测开日记")]),s._v("，让我们进一步交流。")]),s._v(" "),t("p",[s._v("以下文章纯属"),t("code",[s._v("个人观点")]),s._v("，请勿对号入座，共勉🍦🍦。")]),s._v(" "),t("h3",{attrs:{id:"什么是屎山代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是屎山代码"}},[s._v("#")]),s._v(" 什么是屎山代码?")]),s._v(" "),t("p",[s._v("大家可能在"),t("code",[s._v("脉脉")]),s._v("或者其他"),t("code",[s._v("程序员论坛")]),s._v("看到过这样的帖子:")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://static.pity.fun/picture/2021-8-12/1628779057309-image.png",alt:""}})]),s._v(" "),t("p",[s._v("其实它就是字面含义: "),t("code",[s._v("屎")]),s._v("堆成了山，简称屎山，这个"),t("code",[s._v("屎")]),s._v("其实恰恰是个形容词，就像"),t("code",[s._v("神一样的男人")]),s._v("，它形容的是"),t("code",[s._v("屎一样的代码")]),s._v("。你以为"),t("code",[s._v("开发不想给你开代码权限")]),s._v("，是因为他们的代码"),t("code",[s._v("很机密")]),s._v("吗😂?")]),s._v(" "),t("h3",{attrs:{id:"屎山代码的形成🍭"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#屎山代码的形成🍭"}},[s._v("#")]),s._v(" 屎山代码的形成🍭")]),s._v(" "),t("p",[s._v("在大家都"),t("code",[s._v("调侃")]),s._v("它的时候，我想为它说几句公道话。屎堆叠成为山，其实经历了漫长的过程。")]),s._v(" "),t("p",[s._v("可能每个朋友在接受一个新项目的时候都是"),t("code",[s._v("信心满满")]),s._v("，干劲十足的。那为什么还是会形成屎山代码呢？我觉得有以下几方面的原因:")]),s._v(" "),t("h2",{attrs:{id:"项目周期过长💔"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#项目周期过长💔"}},[s._v("#")]),s._v(" 项目周期过长💔")]),s._v(" "),t("p",[s._v("一个项目迭代过多，导致我们在项目初期尽管考虑得再全面也不能考虑到几十个版本后的需求。")]),s._v(" "),t("p",[s._v("因为这些改动是后续添加的，所以我们做的基本都不是去"),t("code",[s._v("重新设计")]),s._v("整个逻辑，而是想办法"),t("code",[s._v("改一改，支持一下新的逻辑")]),s._v("。长期下去，你会发现代码里出现了很多判断，或者按照我常用的堆叠方法: "),t("code",[s._v("getUserV2")]),s._v("，也就是写一个新版本的方法，"),t("s",[s._v("但又保留原来的方法达到兼容的目的")]),s._v("。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("项目进度太赶🎧")]),s._v(" "),t("p",[s._v("大家作为测试，也没少被催过进度。很多时候老板可能早上说完，晚上就要看到这个功能。没办法呀，只能堆呀。这个时候可不是什么"),t("code",[s._v("方案设计")]),s._v("，"),t("code",[s._v("逻辑梳理")]),s._v("的时候，生怕不能按时完成老板的要求。")]),s._v(" "),t("p",[s._v("在这样的情况下，自然什么牛鬼蛇神的代码都会出来。你可能会在一个方法里面看到无数个:")])])]),s._v(" "),t("div",{staticClass:"language-PYTHON line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" xxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pass")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("elif")]),s._v(" xxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pass")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("pass")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" xxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" xxx "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" xxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" xxx "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("and")]),s._v(" xxxx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n           "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" \n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("continue")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("再者，项目这么赶，哪有时间写"),t("code",[s._v("注释")]),s._v("呀！能在"),t("code",[s._v("最不容易看懂")]),s._v("的地方加上一句话，已经算"),t("code",[s._v("给力")]),s._v("了！")]),s._v(" "),t("p",[s._v("如此便是恶性循环，如果不慎引入不太靠谱的中间件，那么技术改造就在所难免了。")]),s._v(" "),t("h2",{attrs:{id:"开发激情褪去💣"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开发激情褪去💣"}},[s._v("#")]),s._v(" 开发激情褪去💣")]),s._v(" "),t("p",[s._v("这玩意儿和谈恋爱一样，我见过刚入职的新人（不知道是不是为了确保转正），那个干劲儿真的很足。每天能研究怎么优化代码，怎么改善方法，用什么设计模式等等。")]),s._v(" "),t("p",[s._v("可随着时间的打磨，激情的褪去，可能他们就不再追求完美，只要求任务完成，没有啥毛病就好，比如:")]),s._v(" "),t("div",{staticClass:"language-Python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 平时不那么常用到的一个方法")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("open")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string-interpolation"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('f"')]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("filename"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('.txt"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" encoding"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf-8'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" w"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" f"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    f"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("write"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("如上是一个写文件的方法，你说它长吧，好像就"),t("code",[s._v("2行")]),s._v("。而且假设我当前还只用得到一次，我可能就随手一写。如果我单独抽到"),t("code",[s._v("FileUtils")]),s._v("方法，确实是没啥毛病的。但"),t("code",[s._v("你确定下次")]),s._v("你需要写文件的时候，会调用"),t("code",[s._v("FileUtils.write_file")]),s._v("吗？而不是直接写出潇洒的: with open?")]),s._v(" "),t("h2",{attrs:{id:"越来越懒🔨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#越来越懒🔨"}},[s._v("#")]),s._v(" 越来越懒🔨")]),s._v(" "),t("div",{staticClass:"language-pYTHON line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("a")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v("行代码\n    具体的逻辑\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v("行代码\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("有上面这样的方法，现在需要写个方法b，只有具体逻辑地方会有变动。")]),s._v(" "),t("p",[s._v("我想很多人在"),t("code",[s._v("其他代码")]),s._v("加起来只有6行的时候，会直接这样做吧，封装方法哪有ctrl+cv舒坦？")]),s._v(" "),t("div",{staticClass:"language-pYTHON line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("b")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    💩💩💩"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("行代码\n    💩💩💩\n    💩💩💩\n    具体的逻辑（新）\n    💩💩💩"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("行代码\n    💩💩💩\n    💩💩💩\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://static.pity.fun/picture/2021-8-12/1628781613943-image.png",alt:"确实，虽然ide会这样提示你，但是谁也阻止不了你偷懒的心。"}})]),s._v(" "),t("h2",{attrs:{id:"接手别人的项目-项目被多人接手-🍌"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#接手别人的项目-项目被多人接手-🍌"}},[s._v("#")]),s._v(" 接手别人的项目(项目被多人接手)🍌")]),s._v(" "),t("p",[s._v("这个就不多说了，屎山虽然人人喊打，但自己不会打自己。如果去"),t("code",[s._v("接手")]),s._v("别人的代码，你看到的只有他"),t("code",[s._v("赶进度")]),s._v("，"),t("code",[s._v("偷懒")]),s._v("，"),t("code",[s._v("摸鱼")]),s._v("时候堆起来的高山。所以这也就解释了为什么声讨屎山总是在"),t("code",[s._v("刚入职")]),s._v("的时候~")]),s._v(" "),t("p",[s._v("好比我司，我接受了一个API自动化的项目，仅仅是帮忙维护，一个"),t("code",[s._v("函数")]),s._v("里面居然有"),t("code",[s._v("2000行")]),s._v("代码，一个文件就更别说了。连idea都快被卡死了，变量定义以后还是显示"),t("code",[s._v("红的")]),s._v("（因为代码太多，还没反应过来）。")]),s._v(" "),t("h3",{attrs:{id:"如何避免屎山代码🎤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何避免屎山代码🎤"}},[s._v("#")]),s._v(" 如何避免屎山代码🎤")]),s._v(" "),t("p",[s._v("说了那么多，怎么避免写出屎山代码呢？")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("代码review")])]),s._v(" "),t("p",[s._v("代码review是个很好的环节，虽然我那前leader写代码不咋地，指点别人却是一流的。当时还是被"),t("code",[s._v("看出不少问题")]),s._v("，比如zookeeper连接忘了关这样的，靠自己还是比较难看出来的，因为这个错误不会"),t("code",[s._v("很明显")]),s._v("。")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("多回顾")])]),s._v(" "),t("p",[s._v("项目再忙，也要抽空梳理以前的逻辑，该补上注释的补上注释，该优化的优化，当然如果没有给充足的时间，就等项目空闲期进行。")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("定期重构")])]),s._v(" "),t("p",[s._v("重构其实也是回顾的一种，当你觉得某个方法2000行了，你就必须得动手了，不然卡到IDE就是你的不对了！")])])]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("写程序也是，不断总结，不断回顾，才能提高自己。如果你"),t("strong",[s._v("回过头来看自己1年前写的代码")]),s._v("，肯定别有一番"),t("strong",[s._v("滋味")]),s._v("。加油，"),t("code",[s._v("屎")]),s._v("作俑者们！👍👍👍")])])}),[],!1,null,null,null);t.default=e.exports}}]);