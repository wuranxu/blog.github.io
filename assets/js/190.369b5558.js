(window.webpackJsonp=window.webpackJsonp||[]).push([[190],{592:function(t,s,a){"use strict";a.r(s);var n=a(2),_=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("大家好~我是"),s("code",[t._v("米洛")]),t._v("！"),s("br"),t._v("\n我正在从0到1打造一个开源的接口测试平台, 也在编写一套与之对应的"),s("code",[t._v("教程")]),t._v("，希望大家多多支持。"),s("br"),t._v("\n欢迎关注我的公众号"),s("code",[t._v("米洛的测开日记")]),t._v("，获取最新文章教程!")])]),t._v(" "),s("h3",{attrs:{id:"回顾"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#回顾"}},[t._v("#")]),t._v(" 回顾")]),t._v(" "),s("p",[t._v("上一节我们把邮件那块的通知做好了，算是到了"),s("code",[t._v("分水岭")]),t._v("。目前来看的话，我们的任务从"),s("code",[t._v("新增")]),t._v("到"),s("code",[t._v("构建")]),t._v("到"),s("code",[t._v("通知")]),t._v("，已经有了一个"),s("strong",[t._v("相对")]),t._v("完善的结局。")]),t._v(" "),s("h3",{attrs:{id:"新的征程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#新的征程"}},[t._v("#")]),t._v(" 新的征程")]),t._v(" "),s("p",[t._v("考虑到明年可能要当奶爸了，接下来也没很多空闲时间来卷了。")]),t._v(" "),s("p",[t._v("所以在此之前，打算先立些功能项，按照喜好在这几个月内"),s("code",[t._v("慢慢实现")]),t._v("。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("[ ] 用例操作日志功能 ⭐⭐⭐⭐")]),t._v(" "),s("p",[t._v("主要记录用例相关变动，包括新增、更新、删除等记录。")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 完善后置条件 ⭐⭐⭐⭐⭐")]),t._v(" "),s("p",[t._v("后置条件我们还没有做呢，这块是个比较重要的问题。")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 重构用例新增/编写页面 ⭐⭐⭐")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 打通httprunner ⭐⭐⭐⭐")]),t._v(" "),s("p",[t._v("这里的打通是可以导入httprunner的yaml数据，导出的话暂定")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 支持编写python脚本作为前置条件 ⭐⭐⭐⭐⭐")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 完成数据工厂功能 ⭐⭐⭐⭐")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 统计页 ⭐⭐⭐⭐")]),t._v(" "),s("p",[t._v("这块功能还是比较重要的，用例的"),s("code",[t._v("数据")]),t._v("，执行的数据，自动化率等等。")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 工作台 ⭐⭐⭐")]),t._v(" "),s("p",[t._v("工作台做的好的话，可以快速完成很多事情。")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 跟yapi打通 ⭐⭐⭐⭐⭐")]),t._v(" "),s("p",[t._v("作为一个接口自动化测试平台，干啥都不能脱离接口。一般的公司都有用到yapi，如果没有的话，rap2或者swagger文件都需要进行支持。")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 用例评价系统 ⭐⭐⭐⭐")]),t._v(" "),s("p",[t._v("为了提高用例的编写质量，需要这套系统。")])]),t._v(" "),s("li",[s("p",[t._v("[ ] oss系统 ⭐⭐⭐⭐")]),t._v(" "),s("p",[t._v("需要支持主流的阿里云sdk，七牛云sdk，腾讯云sdk。目的是能够支持文件上传类型的case。")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 其他通信协议接口测试grpc、dubbo等⭐⭐⭐⭐")]),t._v(" "),s("p",[t._v("这个也很重要，如果只支持http，相对比较鸡肋。")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 用户管理功能 ⭐⭐⭐⭐")]),t._v(" "),s("p",[t._v("其实比较鸡肋，可以做简单点，可以"),s("code",[t._v("禁用用户")]),t._v("这样的就可以了。因为公司一般都是内网系统，如果离职了人也登录不进来了。")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 打通CI")]),t._v(" "),s("p",[t._v("由于各个公司的发布系统构成都不一样，如果有这方面需求，我们可以提供openapi出去，让他们可以根据"),s("code",[t._v("app_id")]),t._v("或者"),s("code",[t._v("git地址")]),t._v("来执行我们制定的case。")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 在线执行测试计划 ⭐⭐⭐⭐⭐")])]),t._v(" "),s("li",[s("p",[t._v("[ ] 在线调试用例 ⭐⭐⭐⭐⭐")])]),t._v(" "),s("li",[s("h2",{attrs:{id:"用户个人资料设置-⭐⭐"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用户个人资料设置-⭐⭐"}},[t._v("#")]),t._v(" [ ] 用户个人资料设置 ⭐⭐")]),t._v(" "),s("p",[t._v("以上还只是"),s("code",[t._v("部分内容")]),t._v("，要做完善还是需要"),s("code",[t._v("花费一些时间")]),t._v("。但好在还有很长时间，我们"),s("code",[t._v("慢慢完善")]),t._v("吧。")])])]),t._v(" "),s("h3",{attrs:{id:"执行测试计划"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行测试计划"}},[t._v("#")]),t._v(" 执行测试计划")]),t._v(" "),s("p",[t._v("先看看原先的"),s("code",[t._v("执行测试计划")]),t._v("功能:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-11-27/1638003590093-image.png",alt:""}})]),t._v(" "),s("p",[t._v("可以看到核心方法已经有了，我们只需要为之编写接口即可。")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/plan/execute"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run_test_plan")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user_info"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Depends"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Permission"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MEMBER"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Executor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("run_test_plan"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user_info"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" PityResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("success"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),t._v(" Exception "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" PityResponse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("failed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("在app/routers/testcase/testplan.py加上如上方法，注意这里权限我们稍作了一些替换:")]),t._v(" "),s("p",[t._v("GUEST换成了MEMBER，语义上更为"),s("strong",[t._v("贴切")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"修改前端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改前端"}},[t._v("#")]),t._v(" 修改前端")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-11-27/1638004507324-image.png",alt:""}})]),t._v(" "),s("p",[t._v("我们在这中间要加一个"),s("code",[t._v("执行")]),t._v("按钮，并且执行完毕后弹出对话框问对方需不需要跳转到"),s("code",[t._v("报告链接")]),t._v("。")]),t._v(" "),s("ul",[s("li",[t._v("src/pages/ApiTest/TestPlan.jsx新增onExecute方法")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-11-27/1638006131725-image.png",alt:""}})]),t._v(" "),s("p",[t._v("测试报告执行完成后，是否跳转到报告页面。")]),t._v(" "),s("ul",[s("li",[t._v("Table操作字段新增"),s("code",[t._v("运行")]),t._v("按钮")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-11-27/1638006195783-image.png",alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("src/models/testplan.js新增executeTestPlan方法")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-11-27/1638006241188-image.png",alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("src/services/testplan.js新增executeTestPlan方法")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-11-27/1638006267406-image.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"看看效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#看看效果"}},[t._v("#")]),t._v(" 看看效果")]),t._v(" "),s("p",[t._v("执行下，然后等待后跳转到"),s("code",[t._v("报告链接")]),t._v("。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-11-27/1638006418153-case%E6%8B%96%E6%8B%BD2.gif",alt:""}})]),t._v(" "),s("p",[t._v("可以看到邮件里的执行人也进行了"),s("code",[t._v("修改")]),t._v("。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-11-27/1638006410547-image.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"修改报告页面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改报告页面"}},[t._v("#")]),t._v(" 修改报告页面")]),t._v(" "),s("p",[t._v("报告页面目前是没有"),s("code",[t._v("测试计划")]),t._v("标识的，我们需要给它来个提示。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-11-27/1638006590644-image.png",alt:""}})]),t._v(" "),s("p",[t._v("页面有点不够放，我们修改下"),s("code",[t._v("Table组件")]),t._v("。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-11-27/1638007525868-image.png",alt:""}})]),t._v(" "),s("p",[t._v("由于本身有mode属性，所以我们根据这个来判断类型就好，其实这个有个缺点，虽然是测试计划，但是"),s("code",[t._v("没显示测试计划的名称")]),t._v("。")]),t._v(" "),s("p",[t._v("那这个问题就留到下一节解决了~")]),t._v(" "),s("p",[t._v("下一节我们编写阿里云sdk和七牛云sdk，完成oss crud功能。")])])}),[],!1,null,null,null);s.default=_.exports}}]);