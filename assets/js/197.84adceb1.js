(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{608:function(t,s,a){"use strict";a.r(s);var v=a(2),_=Object(v.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("大家好~我是"),s("code",[t._v("米洛")]),t._v("！"),s("br"),t._v("\n我正在从0到1打造一个开源的接口测试平台, 也在编写一套与之对应的"),s("code",[t._v("教程")]),t._v("，希望大家多多支持。"),s("br"),t._v("\n欢迎关注我的公众号"),s("code",[t._v("米洛的测开日记")]),t._v("，获取最新文章教程!")])]),t._v(" "),s("h3",{attrs:{id:"回顾"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#回顾"}},[t._v("#")]),t._v(" 回顾")]),t._v(" "),s("p",[t._v("上一节我们讨论了"),s("code",[t._v("怎么结束一个异步任务")]),t._v("，我们还没有完全运用到项目之中。不过没关系，我们还有更紧要的事情要做:")]),t._v(" "),s("p",[s("strong",[t._v("由于之前完成了数据驱动，导致我们执行case的时候需要带上环境数据了，所以之前的在线执行case功能已经不能继续用了。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-12-12/1639298939309-image.png",alt:""}})]),t._v(" "),s("p",[t._v("会出现上述问题，我们需要改造下前后端。")]),t._v(" "),s("h3",{attrs:{id:"先看看疗效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#先看看疗效"}},[t._v("#")]),t._v(" 先看看疗效")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-12-12/1639299288392-image.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("执行单个case的时候必须选择环境。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-12-12/1639299377051-image.png",alt:""}})]),t._v(" "),s("p",[t._v("多选的时候也会出现环境。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-12-12/1639299421602-image.png",alt:""}})]),t._v(" "),s("p",[t._v("执行2条数据后，会出现简单的测试报告。")]),t._v(" "),s("h3",{attrs:{id:"改造后端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#改造后端"}},[t._v("#")]),t._v(" 改造后端")]),t._v(" "),s("p",[t._v("我们是支持批量case和单个case执行的，由于历史原因我们封装了2个接口:")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("/request/run")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("/request/run/multiple")])]),t._v(" "),s("p",[t._v("我们看下对应的方法:")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-12-12/1639299068895-image.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("由于批量执行，会生成一个测试报告，在测试计划部分我们已经支持了环境，所以我们把前端参数传入即可。")])]),t._v(" "),s("p",[t._v("run方法，由于我们支持了"),s("code",[t._v("数据驱动")]),t._v("，所以一个case会有多条数据的结果。这把err的判断需要去掉，因为错误信息已经在"),s("code",[t._v("result")]),t._v("里面了，不能因为有一条数据出错就停止其他数据。")]),t._v(" "),s("p",[t._v("最后我们需要把测试数据和"),s("code",[t._v("测试结果")]),t._v("对应起来，所以我们建立了一个ans的字典，用于存放"),s("code",[t._v("测试数据")]),t._v("和测试结果的映射。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-12-12/1639299140338-image.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"改造前端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#改造前端"}},[t._v("#")]),t._v(" 改造前端")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("需要改变TestResult组件")]),t._v(" "),s("p",[t._v("当传入map的时候（说明是单条case多条数据，渲染出N个tab）")])]),t._v(" "),s("li",[s("p",[t._v("改变执行和执行用例按钮")]),t._v(" "),s("p",[t._v("使得按钮变为下拉菜单类型，并把env参数带入。")])]),t._v(" "),s("li",[s("p",[t._v("页面里面的执行按钮也需要修改")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-12-12/1639303390267-image.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"这样我们就把对应的执行功能给做好了-大家就可以在编辑case页面进行测试了。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#这样我们就把对应的执行功能给做好了-大家就可以在编辑case页面进行测试了。"}},[t._v("#")]),t._v(" 这样我们就把对应的执行功能给做好了，大家就可以在"),s("code",[t._v("编辑case")]),t._v("页面进行测试了。")]),t._v(" "),s("p",[t._v("今天的内容就介绍到了这里，咱们下期再见。")])])}),[],!1,null,null,null);s.default=_.exports}}]);