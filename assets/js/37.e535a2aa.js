(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{435:function(t,s,a){"use strict";a.r(s);var e=a(2),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("大家好，我是米洛，求三连！求关注"),s("code",[t._v("米洛的测开日记")]),t._v("!")])]),t._v(" "),s("h2",{attrs:{id:"简单回忆"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简单回忆"}},[t._v("#")]),t._v(" 简单回忆")]),t._v(" "),s("p",[t._v("上篇我们讲了"),s("code",[t._v("filter")]),t._v("的用法，仍然有同学不服，觉得"),s("code",[t._v("列表推导式")]),t._v("才是王道！别急，今天的小丑皇（reduce）会让你们难受的！今天我们就来讲讲这对"),s("code",[t._v("连体婴儿")]),t._v("。")]),t._v(" "),s("h3",{attrs:{id:"map"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#map"}},[t._v("#")]),t._v(" map")]),t._v(" "),s("p",[t._v("map（还有reduce）和"),s("code",[t._v("filter")]),t._v("一样，都是根据你传入的方法，对你的"),s("code",[t._v("可迭代对象")]),t._v("进行批量操作。")]),t._v(" "),s("p",[t._v("比如上篇说过，捞出所有大于0的数字。")]),t._v(" "),s("p",[t._v("这篇我们的需求也类似，我们需要给每个元素加一个前缀: "),s("code",[t._v("wqrf-")]),t._v("，代表这些数据属于"),s("code",[t._v("wqrf")]),t._v("。")]),t._v(" "),s("p",[t._v("二三流青年的解法就不详细说明了，我们来看看map的用法:")]),t._v(" "),s("div",{staticClass:"language-Python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"测试开发干货"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"测试开发水货"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"测试开发杂货"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"测试开发笋货"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ndata "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("lambda")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"wqrf-')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-8-17/1629191532818-image.png",alt:"可以看到，效果如期而至"}})]),t._v(" "),s("p",[t._v("简单解释一下，map的用法和filter类似，但是map传入的方法里面不再强制要求返回True/False，会根据你返回的值生成不同的值。")]),t._v(" "),s("p",[t._v("把传入的function理解为一个"),s("code",[t._v("加工步骤")]),t._v('，比如批量给手机套个壳儿，这边的f"wqrf-{x}"就是把x加工为'),s("code",[t._v("wqrf-x")]),t._v("。")]),t._v(" "),s("p",[s("strong",[t._v('f"{}"是一种新型写法，'),s("code",[t._v("{}")]),t._v("里面可以写Python语句，非常"),s("code",[t._v("方便好用")]),t._v("。")])]),t._v(" "),s("h3",{attrs:{id:"reduce"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reduce"}},[t._v("#")]),t._v(" reduce")]),t._v(" "),s("p",[t._v("接下来是我们最大的boss->reduce了。reduce理解起来比较怪异，它的参数类型也和其他2个类似，但是用起来却"),s("code",[t._v("不大一样")]),t._v("。")]),t._v(" "),s("ul",[s("li",[t._v("首先它接受一个含2个参数的方法")]),t._v(" "),s("li",[t._v("其次，它返回的不是一个可迭代对象，而是一个具体的值")])]),t._v(" "),s("p",[t._v("reduce是这样的功能，把可迭代对象里面的数据进行一个"),s("code",[t._v("累积操作")]),t._v("。假设我们的方法是f:")]),t._v(" "),s("p",[s("code",[t._v("reduce(f, [a,b,c,d,e])")])]),t._v(" "),s("p",[t._v("那我们的执行结果就是:")]),t._v(" "),s("p",[s("code",[t._v("f(f(f(f(a, b), c), d),e)")])]),t._v(" "),s("p",[t._v("可以看到，f(a,b)的结果继续和c进行"),s("code",[t._v("f")]),t._v("操作，之后和d进行f操作，直到迭代数据走完。")]),t._v(" "),s("h2",{attrs:{id:"来看一个实用的场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#来看一个实用的场景"}},[t._v("#")]),t._v(" 来看一个实用的场景")]),t._v(" "),s("p",[t._v("假设我有一个整数数组: [5,2,0,1,3,1,4,7,7,8]")]),t._v(" "),s("p",[t._v("我们要把它变成 "),s("code",[t._v("5201314778")]),t._v("这个数字，想想这道菜该怎么做？")]),t._v(" "),s("h4",{attrs:{id:"二流青年"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二流青年"}},[t._v("#")]),t._v(" 二流青年")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Python\na = [5,2,0,1,3,1,4,7,7,8]\nnumber = 0\nfor idx, n in enumerate(a[::-1]):\n    number += n * 10 ** idx\nprint(number)\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-8-17/1629197852492-image.png",alt:"数学方法"}})]),t._v(" "),s("p",[t._v("这已经在采用数学方法了，先倒序排列，然后第一个数就是个位，8 ** 10的0次幂，接着是到了十位，8 + 7 * 10的一次幂。")]),t._v(" "),s("p",[t._v("这样最终加起来就是"),s("code",[t._v("那个数字")]),t._v("了。但是第一我是觉得比较麻烦，第二是我觉得这些"),s("code",[t._v("不够优雅")]),t._v("。")]),t._v(" "),s("h4",{attrs:{id:"reduce登场"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reduce登场"}},[t._v("#")]),t._v(" reduce登场")]),t._v(" "),s("p",[t._v("按照我们刚才的说法， 我们用reduce，第一个数字 X 10+第二个数字，以此类推，是不是就能拿到"),s("code",[t._v("最终结果")]),t._v("了呢？")]),t._v(" "),s("p",[t._v("试试就试试:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://static.pity.fun/picture/2021-8-17/1629198122262-image.png",alt:"可以看到结果完全正确，符合预期"}})]),t._v(" "),s("p",[t._v("这里需要注意的是，因为reduce常用度较低，所以把它包装到了functools里面，如果想尝鲜的铁子们，可以引入一下再用。")]),t._v(" "),s("div",{staticClass:"language-PYTHON line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" functools "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("reduce")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("今天的内容就到这里了，下一篇技巧君会带大家来到"),s("code",[t._v("异步文件读取")]),t._v("的世界，结合最近做的一个需求展开细🔒~")]),t._v(" "),s("p",[t._v("有喜欢我这个主题的（我自己做的），请发消息("),s("code",[t._v("点个赞")]),t._v(")给我，我告诉你们怎么用~")])])}),[],!1,null,null,null);s.default=n.exports}}]);